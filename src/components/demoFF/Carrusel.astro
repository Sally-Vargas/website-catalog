---
import { Image } from 'astro:assets';
import hamburgesa from './img/hamburguesa.jpg';
import hamburgesaCPapas from './img/hamburguesa-papas.jpg';
import papas from './img/papas.jpg';
import aguacate from './img/aguacate.jpg';
---

<section id="promociones" class="section">
  <h2 class="section-title">Promociones del Mes</h2>
  <div class="carousel-container">
    <div class="carousel-track">
      <Image src={hamburgesaCPapas} alt="Promoción 1" />
      <Image src={hamburgesa} alt="Promoción 2" />
      <Image src={papas} alt="Promoción 3" />
      <Image src={aguacate} alt="Promoción 4" />

      <Image
        src={papas}
        alt="Promoción 1 (duplicado)"
      />
      <Image src={hamburgesa} alt="Promoción 2 (duplicado)" />
      <Image src={papas} alt="Promoción 3 (duplicado)" />
      <Image src={aguacate} alt="Promoción 4 (duplicado)" />
    </div>
  </div>
</section>

<style>
  /* --- 1. Variables Globales --- */
  :root {
    --image-width: 400px; /* Ancho de cada imagen en escritorio */
    --image-count: 4; /* Número de imágenes en el set original */
    --scroll-duration: 15s;
  }

  .carousel-container {
    width: 100%;
    overflow: hidden;
  }

  /* --- 2. Track y Animación --- */
  .carousel-track {
    display: flex;
    /* La animación DEBE apuntar al keyframe correcto */
    animation: scroll var(--scroll-duration) linear infinite;
    /* Ancho total: 2 sets * ancho_imagen */
    width: calc(var(--image-width) * var(--image-count) * 2);
  }

  .carousel-track :global(img) {
    height: 300px;
    width: var(--image-width);
    object-fit: cover;
    flex-shrink: 0;
    margin-right: 0;
  }

  /* --- 3. Keyframes (Nombre Corregido) --- */
  @keyframes scroll {
    0% {
      transform: translateX(0);
    }
    /* El desplazamiento es el ancho exacto del set original (4 imágenes) */
    100% {
      transform: translateX(calc(var(--image-width) * var(--image-count) * -1));
    }
  }

  /* --- 4. Media Queries (Uso de Variables Consistentes) --- */
  @media (max-width: 768px) {
    /* Sobreescribe las variables CSS para el móvil */
    :root {
      --image-width: 300px; /* Nuevo ancho para móvil */
      --scroll-duration: 12s; /* Opcional: ajustar velocidad en móvil */
    }

    .section-title {
      font-size: 2em;
    }

    .carousel-track :global(img) {
      /* Ya no necesitas min-width si usas la variable width: var(--image-width); */
      width: var(--image-width);
      height: 200px;
    }
  }
</style>
